<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Register page</title>
    <style>
        .avatar-container img {
            width: 70px;
            margin: 14px 0;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="shadow-lg mt-4 p-4 w-50 mx-auto bg-light">
            <h4 class="text-danger text-center">Registration page</h4>
        <form action="" class="submit">

            <div class="avatar-container">  </div>
            <select name="images" id="">
                <option value="">Srelect avatar</option>
                <option value="./img/avatar1.jpeg">First</option>
                <option value="./img/avatar2.jpeg">Second</option>
                <option value="./img/avatar3.jpeg">Third</option>
                <option value="./img/avatar4.jpeg">Fourth</option>
                <option value="./img/avatar5.jpeg">Fifth</option>
                <option value="./img/avatar6.jpeg">Sixth</option>
                <option value="./img/avatar7.jpeg">Seventh</option>
            </select>
            <input type="text" name="name" id="" class="form-control" placeholder="Enter fullname">
            <span class="d-block text-danger name_err"></span>
            <input type="email" name="email" id="" class="form-control my-3" placeholder="Enter email">
            <span class="d-block text-danger email_err"></span>
            <input type="text" name="address" id="" class="form-control" placeholder="Enter address">
            <span class="d-block text-danger add_err"></span>
            <input type="text" name="username" id="" class="form-control my-3" placeholder="Enter username">
            <span class="d-block text-danger user_err"></span>
            <input type="password" name="password" id="psw" class="form-control" placeholder="Enter password">
            <span>show password</span><input type="checkbox" name="" id="" onclick="showPassWord()">
            <span class="d-block text-danger pass_err"></span>
            <button class="btn btn-primary w-50 d-block">Register</button>
        </form>
        </div>
    </div>

    <script>
        const submitButton = document.querySelector('.submit');
        const pswInput = document.querySelector('#psw');
        const avatarCont = document.querySelector('.avatar-container');
        const showPassWord = function() {
            if(pswInput.type === "password") {
                pswInput.type = "text"
            } else {
                pswInput.type = "password"
            }
        }
        for(let i = 1; i <= 7; i++) {
            let avatar = `./img/avatar${i}.jpeg`;

            const img = document.createElement('img');
            img.src = avatar;
            avatarCont.append(img);
        }

        submitButton,addEventListener('submit', (e) => {
            e.preventDefault();
            const name = submitButton.name.value;
            const email = submitButton.email.value;
            const address = submitButton.address.value;
            const userName = submitButton.username.value;
            const passWord = submitButton.password.value;
            const images = submitButton.images.value;

            if(name === '') {
                const nameErr = document.querySelector('.name_err');
                nameErr.innerText = 'This field is required';
            } if (email === '') {
                const emailErr = document.querySelector('.email_err');
                emailErr.innerText = 'This field is required'
            } if (userName === '') {
                const userErr = document.querySelector('.user_err');
                userErr.innerText = 'This field is required'
            } if (passWord === '') {
                const pswErr = document.querySelector('.pass_err');
                pswErr.innerText = 'This field is required'
            }

            const checkUser = localStorage.getItem(userName);
            if(checkUser) {
                alert('username already in use');
            } else {
                let userInfo = {name:name, email:email, address:address, username:userName, password:passWord, img: images};
                localStorage.setItem(userName, JSON.stringify(userInfo));
                alert('Registretion successful');
                window.location.href = './login.html';
            }
         });
    </script>
</body>
</html>